<template>
<uni-shadow-root class="lin-ui-dist-counter-index"><view class="l-class container-count">
  <view :class="'symbol '+(count<=min|| disabled?'disabled l-disabled-class':'abled l-symbol-class')" @click.stop.prevent="_$self[(count<=min|| disabled?'doNothing':'onTapChange')||'_$noop']($event)" data-type="overflow_min" data-change-type="reduce" :hover-class="isHover?'count-hover':''">
    <view class="l-icon l-icon-reduce" :style="'font-size:'+(iconSize)+';color:'+(iconColor)"></view>
  </view>
  <input :hidden="(!focus)" class="l-count-class count" :disabled="disabled" type="number" :focus="focus" :value="count" @input="onInput" @blur="onBlur"></input>
  <view :hidden="focus" class="l-count-class count" mut-bind:tap="onCount">{{count}}</view>
  <view :class="'l-symbol-class symbol '+(count>=max|| disabled?'disabled l-disabled-class':'abled l-symbol-class')" @click.stop.prevent="_$self[(count>=max|| disabled?'doNothing':'onTapChange')||'_$noop']($event)" data-type="overflow_max" data-change-type="add" :hover-class="isHover?'count-hover':''">
       <view class="l-icon l-icon-add" :style="'font-size:'+(iconSize)+';color:'+(iconColor)"></view>
  </view>
</view></uni-shadow-root>
</template>

<script>
import LIcon from '../icon/index.vue'
global['__wxVueOptions'] = {components:{'l-icon': LIcon}}

global['__wxRoute'] = 'lin-ui/dist/counter/index'
import eventUtil from"../core/utils/event-util";Component({externalClasses:["l-class","l-symbol-class","l-count-class","l-disabled-class"],properties:{count:{type:Number,value:1},max:{type:Number,value:9999},min:{type:Number,value:1},step:{type:Number,value:1},disabled:Boolean,iconSize:String,iconColor:String},data:{focus:!1},observers:{count:function(t){eventUtil.emit(this,"linchange",{count:t})},"count,min,max":function(){this.valueRange(this.data.count,"parameter")}},methods:{doNothing(t){const{type:e}=t.currentTarget.dataset;eventUtil.emit(this,"linout",{type:e,way:"icon"})},onCount(){this.setData({focus:!0})},onBlur(t){let{value:e}=t.detail;setTimeout(()=>{this.blurCount(Number(e),()=>{eventUtil.emit(this,"lintap",{count:this.data.count,type:"blur"})})},50)},blurCount(t,e){t&&this.valueRange(t),e&&e()},valueRange(t,e="input"){const{count:n,min:a,max:i}=this.data;"parameter"===e&&t>i&&console.error(`Counter 组件：初始值 ${n} 大于了最大值 ${i}，请注意修正`),"parameter"===e&&t<a&&console.error(`Counter 组件：初始值 ${n} 小于了最小值 ${a}，请注意修正`),t>i&&eventUtil.emit(this,"linout",{type:"overflow_max",way:e}),t<a&&eventUtil.emit(this,"linout",{type:"overflow_min",way:e}),(t=(t=t>i?i:t)<a?a:t)===this.data.count&&this.setData({focus:!1}),t!==this.data.count&&this.setData({count:t},()=>{this.setData({focus:!1})})},onTapChange(t){const e=t.currentTarget.dataset.changeType,{count:n,step:a,min:i,max:o}=this.data;let s;"add"===e?s=n+a>o?o:n+a:"reduce"===e&&(s=n-a<i?i:n-a),this.setData({count:s}),eventUtil.emit(this,"lintap",{count:this.data.count,type:e})},onInput(t){eventUtil.emit(this,"lininput",t.detail)}}});
export default global['__wxComponents']['lin-ui/dist/counter/index']
</script>
<style platform="mp-weixin">
.container-count{display:flex;flex-direction:row;width:170rpx;height:56rpx}.symbol{height:100%;width:56rpx;font-size:28rpx;color:#596c8e;display:flex;align-items:center;justify-content:center}.disabled{background-color:#f3f3f3;color:#c4c9d2}.abled{background-color:#ecf1f8;color:#596c8e}.count{height:100%;flex:1;min-height:56rpx;line-height:56rpx;font-size:24rpx;color:#596c8e;background:#f6f7f9;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@font-face{font-family:iconfont;src:url('data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAALEAAsAAAAABqwAAAJ3AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDBgqBFIEWATYCJAMMCwgABCAFhG0HNxvdBcgekiSBqhRCJKIogADMEYRr5GySu0dQoBAloETFRVKmqpWoK1wVG1th2Ij732n7N5fsqTh2xyneKfa2N3/anZKGvYXFohGGrUFIEA6JogD/fZ7L6U2gA7nGtyynNW3s8fyoF2AcUEBjbYqsRALxFtlF3ImLOE6g3ZheoYOxmRVIKtC4QLww9QYkCxFFMfKtQt2wtIjXKq3pZfrEq+j78d9qJEmqDE09fTTahoFf6deHfNxwgxOiBHl1hYx5oBC3GjMXIsLgItpN0e7yWhHSXPEmkcq31Dv94yWihmo7wbQcS/yiMoJf9yskkEFdzE0Diwo7eF2IkexeNr35cvtSjmQ/fjt5zeTy++93z1I4x8LHT3u9VVdH6SHr0r8+OjOTtCopyONe0uFsIlZDiaMZyTdAmzFfZzrm0+EOQPOcP/IeANGP4rNA8KN0+V8rbPwlMwX83P7UK0Wa5wJwS+sZvMEfUwMbiq9F1lxcFVWFvmwE4ErICtOvARTo9zPeMgROEVoL2hG+FqMeslbjZGHnUemwjlqrbbSbM766wwAuIkobZl1ICL0ekXT7jqzXF1nYb1SG/aLWGxG0O4uBLTtMhpne59gQ2CbNHWK2mEeJXaTj+iXUN5wGz2sjfg15YMaJJqvl/Dh6yOeYEWzqFSEooZy5ZEw6DR2HEZ8zC1tCNoTwq4pCm94kt5gLafs41CCgNqJpB2FqYTyUtxbSlc8vQboNjgbeIejJr0FcwOyc0MhUADlu8kCCe3klsElXIQgUQXGMixiTBiGHgyH85kEW1CLIjBEpX5WCm1GoSV7f4n7fNmiH9syRIkeR77bbiWdmwzMaDAAA') format('woff2')}.l-icon-add:before{content:"\e602"}.l-icon-reduce:before{content:"\e69c"}.l-icon{font-family:iconfont;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.l-icon::before{display:inline-flex}.count-hover{opacity:.8}
</style>